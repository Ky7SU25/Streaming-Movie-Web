<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- SEO Meta Tags -->
    <title>@(ViewData["Title"] ?? "NgDat Movie - Xem Phim Online HD Miễn Phí | Phim Mới Nhất 2025")</title>
    <meta name="description" content="@(ViewData["Description"] ?? "NgDat Movie - Trang web xem phim online miễn phí chất lượng HD. Xem phim mới nhất 2025, phim bộ, phim lẻ, phim chiếu rạp với phụ đề tiếng Việt. Không quảng cáo, tốc độ cao.")">
    <meta name="keywords" content="@(ViewData["Keywords"] ?? "xem phim online, phim HD miễn phí, phim mới 2025, phim bộ, phim lẻ, phim chiếu rạp, NgDat Movie, movie.ngdat.io.vn, phim vietsub, phim hay nhất")">
    <meta name="author" content="NgDat Movie">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://movie.ngdat.io.vn@(Context.Request.Path)">

    <!-- Open Graph Meta Tags -->
    <meta property="og:site_name" content="NgDat Movie">
    <meta property="og:title" content="@(ViewData["OgTitle"] ?? ViewData["Title"] ?? "NgDat Movie - Xem Phim Online HD Miễn Phí")">
    <meta property="og:description" content="@(ViewData["OgDescription"] ?? ViewData["Description"] ?? "Trang web xem phim online miễn phí chất lượng HD. Xem phim mới nhất 2025, phim bộ, phim lẻ với phụ đề tiếng Việt.")">
    <meta property="og:image" content="@(ViewData["OgImage"] ?? "https://movie.ngdat.io.vn/img/og-image.jpg")">
    <meta property="og:url" content="https://movie.ngdat.io.vn@(Context.Request.Path)">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="vi_VN">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="@(ViewData["TwitterTitle"] ?? ViewData["Title"] ?? "NgDat Movie - Xem Phim Online HD Miễn Phí")">
    <meta name="twitter:description" content="@(ViewData["TwitterDescription"] ?? ViewData["Description"] ?? "Trang web xem phim online miễn phí chất lượng HD với phụ đề tiếng Việt.")">
    <meta name="twitter:image" content="@(ViewData["TwitterImage"] ?? "https://movie.ngdat.io.vn/img/og-image.jpg")">

    <!-- Structured Data -->
    <script type="application/ld+json">
        {
            "name": "NgDat Movie",
            "alternateName": ["NgDat", "movie.ngdat.io.vn"],
            "url": "https://movie.ngdat.io.vn",
            "description": "Trang web xem phim online miễn phí chất lượng HD với phụ đề tiếng Việt",
            "potentialAction": {
                "target": "https://movie.ngdat.io.vn/Movie/Search?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
    </script>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="~/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="~/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="~/css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="~/css/plyr.css" type="text/css">
    <link rel="stylesheet" href="~/css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="~/css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="~/css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="~/css/style.css" type="text/css">
</head>
<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Header Section Begin -->
    <header class="header">
        <div class="container">
            <div class="row">
                <div class="col-lg-2">
                    <div class="header__logo">
                        <a asp-action="Index" asp-controller="Home">
                            <img src="~/img/logo.png" alt="">
                        </a>
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="header__nav">
                        @functions {
                            public string IsCurrentController(string controller)
                            {
                                var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
                                return (currentController == controller) ? "active" : "";
                            }

                            public string IsCurrentActionr(string controller, string action)
                            {
                                var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
                                var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
                                return (currentController == controller && currentAction == action) ? "active" : "";
                            }
                        }
                        <nav class="header__menu mobile-menu">
                            <ul>
                                <li class="@IsCurrentActionr("Home", "Index")">
                                    <a asp-action="Index" asp-controller="Home">Homepage</a>
                                </li>
                                <li class="@IsCurrentController("Category")">
                                    <a asp-action="Categories" asp-controller="Category" class="dropdown-toggle">
                                        Categories
                                    </a>
                                    @await Component.InvokeAsync("CategoryMenu")
                                </li>
                                <li class="@IsCurrentController("Blog")">
                                    <a asp-action="Blogs" asp-controller="Blog">Blog</a>
                                </li>
                                <li class="@IsCurrentActionr("Contact", "Contact")">
                                    <a asp-action="Contact" asp-controller="Contact">Contacts</a>
                                </li>
                                @if (User.Identity.IsAuthenticated)
                                {
                                    <li>
                                        <a asp-action="PaymentChoice" asp-controller="Payment">Upgrade</a>
                                    </li>
                                }
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="col-lg-2">
                    <div class="header__right d-flex justify-content-end align-items-center">
                        <a href="#" class="me-3 dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><span class="icon_search"></span></a>

                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <a href="#" class="dropdown-item search-switch" data-search-type="normal">Normal Search</a>
                            </li>
                            <li>
                                <a href="#" class="dropdown-item search-switch" data-search-type="ai">AI Search</a>
                            </li>
                        </ul>

                        @if (User.Identity.IsAuthenticated)
                        {
                            <div class="dropdown d-inline-block">
                                <a class="dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    @await Component.InvokeAsync("UserAvatar")
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li><a class="dropdown-item" asp-action="UserProfile" asp-controller="UserProfile">Profile</a></li>
                                    <li>
                                        <form asp-action="Logout" asp-controller="Account" method="post" class="dropdown-item m-0 p-0">
                                            <button type="submit" class="btn w-100 text-start">Logout</button>
                                        </form>
                                    </li>
                                </ul>
                            </div>
                        }
                        else
                        {
                            <div class="dropdown d-inline-block">
                                <a class="dropdown-toggle text-white" asp-action="Login" asp-controller="Account">
                                    <span class="icon_profile"></span>
                                </a>
                            </div>
                        }


                    </div>
                </div>
            </div>
            <div id="mobile-menu-wrap"></div>
        </div>
    </header>
    <!-- Header End -->
    @RenderBody()

    <!-- Footer Section Begin -->
    <footer class="footer">
        <div class="page-up">
            <a href="#" id="scrollToTopButton"><span class="arrow_carrot-up"></span></a>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="footer__logo">
                        <a asp-action="Index" asp-controller="Home"><img src="~/img/logo.png" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="footer__nav">
                        <ul>
                            <li class="@IsCurrentActionr("Home", "Index")">
                                <a asp-action="Index" asp-controller="Home">Homepage</a>
                            </li>
                            <li class="@IsCurrentActionr("Category", "Categories")">
                                <a asp-action="Categories" asp-controller="Category">Categories</a>
                            </li>
                            <li class="@IsCurrentActionr("Blog", "Blogs")">
                                <a asp-action="Blogs" asp-controller="Blog">Blog</a>
                            </li>
                            <li class="@IsCurrentActionr("Home", "Contact")">
                                <a asp-action="Contact" asp-controller="Home">Contacts</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3">
                    <p>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    </p>

                </div>
            </div>
        </div>
    </footer>
    <!-- Footer Section End -->
    <!-- Search model Begin -->
    <div class="search-model" id="normalSearchModal" style="display: none;">
        <div class="h-100 d-flex align-items-center justify-content-center">
            <div class="search-close-switch"><i class="icon_close"></i></div>
            <div class="search-box bg-white rounded-pill px-4 py-3 d-flex align-items-center shadow">
                <form class="search-model-form d-flex flex-grow-1" asp-action="Search" asp-controller="Movie" method="get">
                    <input type="hidden" name="type" id="searchTypeInput" value="normal" />
                    <input type="text" name="q" id="search-input" placeholder="Search here....." class="form-control border-0 bg-transparent me-2">
                    <button type="submit" class="btn p-2 border-0 bg-transparent">
                        <span class="icon_search fa-2x"></span>
                    </button>
                </form>
            </div>
        </div>
    </div>
    <!-- Search model end -->
    <!-- Js Plugins -->
    <script src="~/js/jquery-3.3.1.min.js"></script>
    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/js/player.js"></script>
    <script src="~/js/jquery.nice-select.min.js"></script>
    <script src="~/js/mixitup.min.js"></script>
    <script src="~/js/jquery.slicknav.js"></script>
    <script src="~/js/owl.carousel.min.js"></script>
    <script src="~/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function () {
            $('.search-switch').click(function (e) {
                e.preventDefault();
                var type = $(this).data('search-type'); // "normal" hoặc "ai"
                $('#searchTypeInput').val(type); // Gán vào hidden input

                // Hiển thị modal
                $('#normalSearchModal').fadeIn();
            });

            // Đóng modal khi click nút close
            $('.search-close-switch').click(function () {
                $('#normalSearchModal').fadeOut();
            });
        });
    </script>
    @await Html.PartialAsync("_NotificationPartial")
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>