@using StreamingMovie.Web.Views.Admin.ViewModels
@model VideoUploadViewModel
@{
    Layout = "_AdminLayout";
}

<div class="min-h-screen p-6">
    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">Video Upload Dashboard</h1>
        <p class="text-gray-600">Upload movies and series to your streaming platform</p>
    </div>

    <!-- Tab Navigation -->
    <div class="mb-6">
        <div class="border-b border-gray-200">
            <nav class="-mb-px flex space-x-8">
                <button id="movie-tab" class="tab-button active py-2 px-1 border-b-2 border-blue-500 font-medium text-sm text-blue-600">
                    <i class="fas fa-film mr-2"></i>Movie Upload
                </button>
                <button id="series-tab" class="tab-button py-2 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700">
                    <i class="fas fa-tv mr-2"></i>Series Upload
                </button>
                <button id="episode-tab" class="tab-button py-2 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700">
                    <i class="fas fa-play-circle mr-2"></i>Episode Upload
                </button>
            </nav>
        </div>
    </div>

    <!-- Movie Upload Form -->
    <div id="movie-form" class="tab-content">
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-semibold text-gray-900 mb-6">Upload Movie</h2>
            <form id="movieUploadForm" class="space-y-6">
                @Html.AntiForgeryToken()
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Basic Information -->
                    <div class="lg:col-span-2">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Basic Information</h3>
                    </div
                    
                    <!-- Movie Title -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Movie Title *</label>
                        <input type="text" name="title" id="movie-title" required
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="Enter movie title">
                    </div>

                    <!-- Original Title -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Original Title</label>
                        <input type="text" name="originalTitle"
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="Original title (if different)">
                    </div>

                    <!-- Slug -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">URL Slug *</label>
                        <input type="text" name="slug" id="movie-slug" required
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="movie-title-slug">
                    </div>

                    <!-- Duration -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Duration (minutes)</label>
                        <input type="number" name="duration" min="1"
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="120">
                    </div>

                    <!-- Release Date -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Release Date</label>
                        <input type="date" name="releaseDate"
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <!-- Country -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Country</label>
                        <select name="countryId"
                                class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Country</option>
                            @foreach (var country in Model.Countries)
                            {
                                <option value="@country.Value">@country.Text</option>
                            }
                        </select>
                    </div>

                    <!-- Description -->
                    <div class="lg:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea name="description" rows="4"
                                  class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                  placeholder="Movie description..."></textarea>
                    </div>

                    <!-- Status & Premium -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                        <select name="status"
                                class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                            <option value="coming-soon">Coming Soon</option>
                        </select>
                    </div>

                    <div class="flex items-center">
                        <input type="checkbox" name="isPremium" id="movie-premium"
                               class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="movie-premium" class="ml-2 block text-sm text-gray-700">Premium Content</label>
                    </div>
                </div>

                <!-- File Upload Section -->
                <div class="mt-8">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">File Uploads</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Video File -->
                        <div class="lg:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Video File *</label>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                                <!-- Upload Area -->
                                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors">
                                    <input type="file" name="videoFile" id="movie-video" accept=".mp4,.mkv,.avi" class="hidden">
                                    <label for="movie-video" class="cursor-pointer">
                                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-2"></i>
                                        <p class="text-gray-600">Click to upload video file</p>
                                        <p class="text-sm text-gray-500">MP4, MKV, AVI up to 2GB</p>
                                    </label>
                                    <div id="movie-video-progress" class="hidden mt-4">
                                        <div class="bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
                                        </div>
                                        <p class="text-sm text-gray-600 mt-1">Uploading... 0%</p>
                                    </div>
                                </div>
                                
                                <!-- Video Preview -->
                                <div id="movie-video-preview" class="hidden">
                                    <div class="relative bg-black rounded-lg overflow-hidden aspect-video">
                                        <video id="movie-video-player" class="w-full h-full object-cover" controls>
                                            <p class="text-white text-center p-4">Your browser does not support the video tag.</p>
                                        </video>
                                        <!-- Processing Overlay -->
                                        <div id="movie-video-processing" class="absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center">
                                            <div class="text-center text-white">
                                                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"></div>
                                                <p>Processing video...</p>
                                                <p class="text-sm text-gray-300">Please wait while we prepare your video</p>
                                            </div>
                                        </div>
                                        <!-- Remove Button -->
                                        <button type="button" onclick="removeVideoPreview('movie')" 
                                                class="absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                    <p id="movie-video-filename" class="text-sm text-gray-600 mt-2 truncate"></p>
                                </div>
                            </div>
                        </div>

                        <!-- Poster Image -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Poster Image</label>
                            <div class="grid grid-cols-1 gap-4">
                                <!-- Upload Area -->
                                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors">
                                    <input type="file" name="posterFile" id="movie-poster" accept=".jpg,.jpeg,.png,.webp" class="hidden">
                                    <label for="movie-poster" class="cursor-pointer">
                                        <i class="fas fa-image text-2xl text-gray-400 mb-2"></i>
                                        <p class="text-gray-600 text-sm">Upload poster</p>
                                    </label>
                                </div>
                                
                                <!-- Image Preview -->
                                <div id="movie-poster-preview" class="hidden relative">
                                    <img id="movie-poster-image" class="w-full h-48 object-cover rounded-lg" alt="Poster Preview">
                                    <button type="button" onclick="removeImagePreview('movie', 'poster')" 
                                            class="absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs">
                                        <i class="fas fa-times"></i>
                                    </button>
                                    <p id="movie-poster-filename" class="text-sm text-gray-600 mt-2 truncate"></p>
                                </div>
                            </div>
                        </div>

                        <!-- Banner Image -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Banner Image</label>
                            <div class="grid grid-cols-1 gap-4">
                                <!-- Upload Area -->
                                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors">
                                    <input type="file" name="bannerFile" id="movie-banner" accept=".jpg,.jpeg,.png,.webp" class="hidden">
                                    <label for="movie-banner" class="cursor-pointer">
                                        <i class="fas fa-image text-2xl text-gray-400 mb-2"></i>
                                        <p class="text-gray-600 text-sm">Upload banner</p>
                                    </label>
                                </div>
                                
                                <!-- Image Preview -->
                                <div id="movie-banner-preview" class="hidden relative">
                                    <img id="movie-banner-image" class="w-full h-32 object-cover rounded-lg" alt="Banner Preview">
                                    <button type="button" onclick="removeImagePreview('movie', 'banner')" 
                                            class="absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs">
                                        <i class="fas fa-times"></i>
                                    </button>
                                    <p id="movie-banner-filename" class="text-sm text-gray-600 mt-2 truncate"></p>
                                </div>
                            </div>
                        </div>

                        <!-- Trailer URL -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Trailer URL</label>
                            <input type="url" name="trailerUrl"
                                   class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                   placeholder="https://youtube.com/watch?v=...">
                        </div>
                    </div>
                </div>

                <!-- Video Settings -->
                <div class="mt-8">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Video Settings</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Video Server</label>
                            <select name="videoServerId"
                                    class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                @foreach (var server in Model.VideoServers)
                                {
                                    <option value="@server.Value">@server.Text</option>
                                }
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Video Quality</label>
                            <select name="videoQualityId"
                                    class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                @foreach (var quality in Model.VideoQualities)
                                {
                                    <option value="@quality.Value">@quality.Text</option>
                                }
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Language</label>
                            <select name="language"
                                    class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="vi">Vietnamese</option>
                                <option value="en">English</option>
                                <option value="ko">Korean</option>
                                <option value="ja">Japanese</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Categories & People -->
                <div class="mt-8">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Categories & People</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Categories</label>
                            <select name="categoryIds" multiple
                                    class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent h-32">
                                @foreach (var category in Model.Categories)
                                {
                                    <option value="@category.Value">@category.Text</option>
                                }
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Directors</label>
                            <select name="directorIds" multiple
                                    class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent h-32">
                                @foreach (var director in Model.Directors)
                                {
                                    <option value="@director.Value">@director.Text</option>
                                }
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Actors</label>
                            <select name="actorIds" multiple
                                    class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent h-32">
                                @foreach (var actor in Model.Actors)
                                {
                                    <option value="@actor.Value">@actor.Text</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="flex justify-end space-x-4 pt-6">
                    <button type="button" class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors">
                        Cancel
                    </button>
                    <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
                        <i class="fas fa-upload mr-2"></i>Upload Movie
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Series Upload Form -->
    <div id="series-form" class="tab-content hidden">
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-semibold text-gray-900 mb-6">Upload Series</h2>
            <form id="seriesUploadForm" class="space-y-6">
                @Html.AntiForgeryToken()
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Basic Information -->
                    <div class="lg:col-span-2">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Series Information</h3>
                    </div
                    
                    <!-- Series Title -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Series Title *</label>
                        <input type="text" name="title" id="series-title" required
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="Enter series title">
                    </div>

                    <!-- Original Title -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Original Title</label>
                        <input type="text" name="originalTitle"
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="Original title (if different)">
                    </div>

                    <!-- Slug -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">URL Slug *</label>
                        <input type="text" name="slug" id="series-slug" required
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="series-title-slug">
                    </div>

                    <!-- Total Seasons -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Total Seasons</label>
                        <input type="number" name="totalSeasons" min="1" value="1"
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <!-- Country for Series -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Country</label>
                        <select name="countryId"
                                class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Country</option>
                            @foreach (var country in Model.Countries)
                            {
                                <option value="@country.Value">@country.Text</option>
                            }
                        </select>
                    </div>

                    <!-- Release Date -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Release Date</label>
                        <input type="date" name="releaseDate"
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <!-- End Date -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">End Date</label>
                        <input type="date" name="endDate"
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <!-- Description -->
                    <div class="lg:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea name="description" rows="4"
                                  class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                  placeholder="Series description..."></textarea>
                    </div>

                    <!-- Status & Premium -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                        <select name="status"
                                class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                            <option value="coming-soon">Coming Soon</option>
                            <option value="ongoing">Ongoing</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>

                    <div class="flex items-center">
                        <input type="checkbox" name="isPremium" id="series-premium"
                               class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="series-premium" class="ml-2 block text-sm text-gray-700">Premium Content</label>
                    </div>
                </div>

                <!-- Categories & People for Series -->
                <div class="mt-8">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Categories & People</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Categories</label>
                            <select name="categoryIds" multiple
                                    class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent h-32">
                                @foreach (var category in Model.Categories)
                                {
                                    <option value="@category.Value">@category.Text</option>
                                }
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Directors</label>
                            <select name="directorIds" multiple
                                    class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent h-32">
                                @foreach (var director in Model.Directors)
                                {
                                    <option value="@director.Value">@director.Text</option>
                                }
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Actors</label>
                            <select name="actorIds" multiple
                                    class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent h-32">
                                @foreach (var actor in Model.Actors)
                                {
                                    <option value="@actor.Value">@actor.Text</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>

                <!-- File Upload Section -->
                <div class="mt-8">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Series Assets</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Poster Image -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Poster Image</label>
                            <div class="grid grid-cols-1 gap-4">
                                <!-- Upload Area -->
                                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors">
                                    <input type="file" name="posterFile" id="series-poster" accept=".jpg,.jpeg,.png,.webp" class="hidden">
                                    <label for="series-poster" class="cursor-pointer">
                                        <i class="fas fa-image text-2xl text-gray-400 mb-2"></i>
                                        <p class="text-gray-600 text-sm">Upload poster</p>
                                    </label>
                                </div>
                                
                                <!-- Image Preview -->
                                <div id="series-poster-preview" class="hidden relative">
                                    <img id="series-poster-image" class="w-full h-48 object-cover rounded-lg" alt="Poster Preview">
                                    <button type="button" onclick="removeImagePreview('series', 'poster')" 
                                            class="absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs">
                                        <i class="fas fa-times"></i>
                                    </button>
                                    <p id="series-poster-filename" class="text-sm text-gray-600 mt-2 truncate"></p>
                                </div>
                            </div>
                        </div>

                        <!-- Banner Image -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Banner Image</label>
                            <div class="grid grid-cols-1 gap-4">
                                <!-- Upload Area -->
                                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors">
                                    <input type="file" name="bannerFile" id="series-banner" accept=".jpg,.jpeg,.png,.webp" class="hidden">
                                    <label for="series-banner" class="cursor-pointer">
                                        <i class="fas fa-image text-2xl text-gray-400 mb-2"></i>
                                        <p class="text-gray-600 text-sm">Upload banner</p>
                                    </label>
                                </div>
                                
                                <!-- Image Preview -->
                                <div id="series-banner-preview" class="hidden relative">
                                    <img id="series-banner-image" class="w-full h-32 object-cover rounded-lg" alt="Banner Preview">
                                    <button type="button" onclick="removeImagePreview('series', 'banner')" 
                                            class="absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs">
                                        <i class="fas fa-times"></i>
                                    </button>
                                    <p id="series-banner-filename" class="text-sm text-gray-600 mt-2 truncate"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="flex justify-end space-x-4 pt-6">
                    <button type="button" class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors">
                        Cancel
                    </button>
                    <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
                        <i class="fas fa-upload mr-2"></i>Create Series
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Episode Upload Form -->
    <div id="episode-form" class="tab-content hidden">
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-semibold text-gray-900 mb-6">Upload Episode</h2>
            <form id="episodeUploadForm" class="space-y-6">
                @Html.AntiForgeryToken()
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Series Selection -->
                    <div class="lg:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Select Series *</label>
                        <select name="seriesId" required
                                class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Choose a series</option>
                            <!-- Series list will be loaded dynamically via JavaScript -->
                        </select>
                    </div>

                    <!-- Season Number -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Season Number *</label>
                        <input type="number" name="seasonNumber" min="1" required
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="1">
                    </div>

                    <!-- Episode Number -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Episode Number *</label>
                        <input type="number" name="episodeNumber" min="1" required
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="1">
                    </div>

                    <!-- Episode Title -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Episode Title</label>
                        <input type="text" name="title"
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="Episode title">
                    </div>

                    <!-- Duration -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Duration (minutes)</label>
                        <input type="number" name="duration" min="1"
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="45">
                    </div>

                    <!-- Air Date -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Air Date</label>
                        <input type="date" name="airDate"
                               class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <div class="flex items-center">
                        <input type="checkbox" name="isPremium" id="episode-premium"
                               class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="episode-premium" class="ml-2 block text-sm text-gray-700">Premium Episode</label>
                    </div>

                    <!-- Description -->
                    <div class="lg:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Episode Description</label>
                        <textarea name="description" rows="3"
                                  class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                  placeholder="Episode description..."></textarea>
                    </div>
                </div>

                <!-- File Upload Section -->
                <div class="mt-8">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Episode Files</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Video File -->
                        <div class="lg:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Episode Video *</label>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                                <!-- Upload Area -->
                                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors">
                                    <input type="file" name="videoFile" id="episode-video" accept=".mp4,.mkv,.avi" class="hidden" required>
                                    <label for="episode-video" class="cursor-pointer">
                                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-2"></i>
                                        <p class="text-gray-600">Click to upload episode video</p>
                                        <p class="text-sm text-gray-500">MP4, MKV, AVI up to 2GB</p>
                                    </label>
                                    <div id="episode-video-progress" class="hidden mt-4">
                                        <div class="bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
                                        </div>
                                        <p class="text-sm text-gray-600 mt-1">Uploading... 0%</p>
                                    </div>
                                </div>
                                
                                <!-- Video Preview -->
                                <div id="episode-video-preview" class="hidden">
                                    <div class="relative bg-black rounded-lg overflow-hidden aspect-video">
                                        <video id="episode-video-player" class="w-full h-full object-cover" controls>
                                            <p class="text-white text-center p-4">Your browser does not support the video tag.</p>
                                        </video>
                                        <!-- Processing Overlay -->
                                        <div id="episode-video-processing" class="absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center">
                                            <div class="text-center text-white">
                                                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"></div>
                                                <p>Processing video...</p>
                                                <p class="text-sm text-gray-300">Please wait while we prepare your video</p>
                                            </div>
                                        </div>
                                        <!-- Remove Button -->
                                        <button type="button" onclick="removeVideoPreview('episode')" 
                                                class="absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                    <p id="episode-video-filename" class="text-sm text-gray-600 mt-2 truncate"></p>
                                </div>
                            </div>
                        </div>

                        <!-- Subtitle File -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Subtitle File</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors">
                                <input type="file" name="subtitleFile" id="episode-subtitle" accept=".srt,.vtt" class="hidden">
                                <label for="episode-subtitle" class="cursor-pointer">
                                    <i class="fas fa-closed-captioning text-2xl text-gray-400 mb-2"></i>
                                    <p class="text-gray-600 text-sm">Upload subtitle</p>
                                </label>
                            </div>
                        </div>

                        <!-- Video Settings -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Video Quality</label>
                            <select name="videoQualityId"
                                    class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                @foreach (var quality in Model.VideoQualities)
                                {
                                    <option value="@quality.Value">@quality.Text</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="flex justify-end space-x-4 pt-6">
                    <button type="button" class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors">
                        Cancel
                    </button>
                    <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
                        <i class="fas fa-upload mr-2"></i>Upload Episode
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- JavaScript -->
<script src="~/js/video-upload.js"></script>
